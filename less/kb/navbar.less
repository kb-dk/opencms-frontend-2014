//
// KB Navbar
// --------------------------------------------------
@nav-mobile-font-family: "RobotoCondensedRegular", Helvetica, Arial, sans-serif;
@nav-mobile-font-size: 20px;
@nav-mobile-li-height: 50px;
@nav-mobile-background-color: #fff;
@nav-mobile-l2-background-color: darken(@nav-mobile-background-color, 10%);
@nav-mobile-l3-background-color: darken(@nav-mobile-l2-background-color, 10%);
@nav-mobile-l4-background-color: darken(@nav-mobile-l3-background-color, 10%);
@nav-mobile-l5-background-color: darken(@nav-mobile-l4-background-color, 10%);
@nav-mobile-padding-left: 30px;
@nav-mobile-padding-step: 10px;
@nav-mobile-l2-padding-left: @nav-mobile-padding-left + @nav-mobile-padding-step;
@nav-mobile-l3-padding-left: @nav-mobile-padding-left + (2 * @nav-mobile-padding-step);
@nav-mobile-l4-padding-left: @nav-mobile-padding-left + (3 * @nav-mobile-padding-step);
@nav-mobile-l5-padding-left: @nav-mobile-padding-left + (4 * @nav-mobile-padding-step);

body{
    overflow-x:hidden;
}
body.showMenu #kbCanvasContainer{
    right:@nav-mobile-show-width;
}

#kbCanvasContainer{
    width:100%;
    position:absolute;
    right:0;
    transition:right 300ms ease-in-out;
}

.kb-navbar-mobile{
    ul{
        margin:0;
        padding:0;
    }
    position: absolute;
    left:100%;
    width:@nav-mobile-show-width;
    padding:0;
    border-left:1px solid @gray-lighter;
    font-family:@nav-mobile-font-family;
    font-size:@nav-mobile-font-size;
    overflow:hidden;
    background-color:#fff;
    .kb-nav > li{
        width:100%;
        a{
            position:relative;
            width:100%;
            border-bottom:1px solid #d8d8d8;
            padding-left:@nav-mobile-left-padding;
            height:@nav-mobile-li-height;
            padding-top:(@nav-mobile-li-height - @nav-mobile-font-size) / 2;
            .activeLine{
                display:none;
                position:absolute;
                //left:@navbar-padding-horizontal + @nav-mobile-left-padding - 1;
                //bottom:floor(@navbar-padding-vertical - 5);
                width:floor(@navbar-padding-horizontal * 1.2);
                border:1px solid @navbar-default-link-active-color;
            }
            &:hover{
                color:@navbar-default-link-hover-color;
                & > .activeLine{
                    display:block;
                    border-color:@navbar-default-link-hover-color;
                }
            }
            li.active a > .activeLine{
                display:block;
            }
        }
    }
    .searchbox-container{
        //width:90%;
        padding:20px;
        border-top: 1px solid @gray-lighter;
        border-bottom: 1px solid @gray-lighter;
        .input-group{
            color:#000;
            kb-nav{
                margin-top:0;
            }
            input, button{
                border-radius:0;
                border:1px solid #000;
                &.btn-default{
                    color:#000;
                }
                &:hover{
                    background-color: inherit;
                }
            }
            input{
                border:1px solid #000;
                border-right:0;
                &.form-control{
                    box-shadow:none;
                }
            }
            button{
                border-left:0;
                background-color:#fff;
            }
        }
    }
    .kb-nav{
        margin:0;
        text-transform: uppercase;
        // Chevrons at the right of mobile menu
        .chevronpart{
            display:none; // NOTE: They start out hidden, and are shown when the submenu is actually loaded.
            float:right;
            cursor:pointer;
            z-index:10; // has to be on top of the directLink for clicks
            height:50px;
            width:50px;
            border-left:1px solid @gray-lighter;
            padding-top:16px;
            padding-left:16px;

            &>.glyphicon{
                transition: transform 200ms ease-out;
                transform: rotate(0);
                &.open{
                    transform: rotate(-180deg);
                };
            }

            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
        }
        // Colors and paddings for level 2-5 submenus
        .nav > li{
            .nav > li{
                .nav > li{
                    .nav > li{
                        a.directLink{
                            background-color: @nav-mobile-l5-background-color;
                            padding-left: @nav-mobile-l5-padding-left;
                        }
                    }
                    a.directLink{
                        background-color: @nav-mobile-l4-background-color;
                        padding-left: @nav-mobile-l4-padding-left;
                    }
                }
                a.directLink{
                    background-color: @nav-mobile-l3-background-color;
                    padding-left: @nav-mobile-l3-padding-left;
                }
            }
            a.directLink{
                background-color: @nav-mobile-l2-background-color;
                padding-left: @nav-mobile-l2-padding-left;
            }
        }
        // Submenu collapse behaviour
        .submenu{
            &.collapse{
                display:none;
                &.in{
                    display:block;
                }
            }
            text-transform:none;
        }
    }
    li > a{
        white-space: nowrap;
        &:hover{
            background-color: inherit;
        }
    }
    li.active > a:hover{
        color:@navbar-default-link-hover-color;
    }
}
@media (min-width: @screen-md) {
    body .topnavigation{
        .navbar-fixed-top;
    }
}
.kb-navbar-container{
    position:relative;
    height:120px;
    overflow:hidden;
    .navbar-header{
        position:relative;
        width:100%;
        top:0;
        .logo{
            width:91px;
            height:88px;
            margin-top:0;
            background-image:url(../images/kb_logo.png);
            background-size:cover;
            border: 1px dashed red;
        }
        .logo-text-container{
            top: 1px;
            left: 115px;
            border: 1px dashed red;
        }
    }
    &.mini{
        height:70px;
        .navbar-header{
            top: -50px;
            .logo{
                width:46px;
                height:45px;
                margin-top:48px;
            }
            .logo-text-container{
                top:53px;
                left:55px;
            }
        }
    }
    &.micro{
        height:50px;
        .navbar-header{
            top: -70px;
            .logo{
                width:46px;
                height:45px;
                margin-top:57px;
            }
        }
    }
    .logo-text-container{
        display:block;
        @media (max-width: 600px) {
            display: none;
        }
        position:absolute;
        left:115px;
        transition: opacity 200ms ease-in;
    }
    .logo-text{
        position:relative;
        width:392px;
        height:41px;
        background-image:url(../images/kb_logo_text.png);
    }

    // FIXME: SAKSET fra mockup'en
@screen-xl:                  1400px;
@screen-xl-min:              @screen-xl;

    .kb-navbar{
        margin-top:70px;
        margin-left:100px;
        font-family:  "RobotoCondensedRegular", Helvetica, Arial, sans-serif;
        font-size:20px;
        .kb-nav{
            @media (max-width: @screen-xl-min) {
                font-size: 16px;
            }
            @media (max-width: @screen-lg-min) {
                font-size: 14px;
            }
        }
        .navbar-right{
            a{
                font-family:  "RobotoSlab-Regular", Helvetica, Arial, sans-serif;
                font-size:14px;
                @media (max-width: @screen-lg-min) {
                    font-size: 12px;
                }
            }
        }

        a{
            color: @navbar-default-link-color;
        }
        .kb-nav{
            text-transform: uppercase;
            li > a{
                position:relative;
                white-space: nowrap;
                transition: padding 200ms ease-out;
                .activeLine{
                    display:none;
                    position:absolute;
                    left:@navbar-padding-horizontal * 1.5;
                    bottom:floor(@navbar-padding-vertical - 2);
                    width:floor(@navbar-padding-horizontal * 1.2);
                    border:1px solid @navbar-default-link-active-color;
                }
                &.active > a:hover{
                    color:@navbar-default-link-hover-color;
                }
                &:hover > .activeLine{
                    display:block;
                    border-color: @navbar-default-link-hover-color;
                }
                &.active > .activeLine{
                    display:block;
                }
            }
        }
        .kb-nav-left{
            margin-top: 5px;
        }
        .kb-nav-left > li{
            float:left;
            a:hover{
                background-color: @navbar-default-bg;
                color:@navbar-default-link-hover-color;
            }
        }
    }
}

